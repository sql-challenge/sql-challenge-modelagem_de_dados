@startuml
!theme plain
' Usando o tema "plain" para um fundo branco padrão e estilo minimalista

' Configurações e estilo estético
hide empty members

' Fundo branco
skinparam backgroundColor white

' Estilo para Coleções (Classes)
skinparam class {
  ArrowColor #607d8b
  ArrowFontSize 12
  BorderColor #b0bec5
  BackgroundColor #eceff1
  FontColor #37474f
  shadowing false
}

' Estilo para Notas
skinparam note {
  BackgroundColor #fffde7
  FontColor #424242
  BorderColor #cfd8dc
  shadowing false
}

title <size:18>Modelagem Lógica (Estilo Híbrido) - Cloud Firestore</size>

' Coleção users
class users as "users (Coleção)" {
  **userId: string (PK)**
  --
  {field} username: string
  {field} nick: string
  {field} email: string
  ' {field} password: string ' (Gerenciado pelo Firebase Auth)
  {field} imagePerfil: string
  {field} createdAt: timestamp
  {field} lastLogin: timestamp
  {field} rankingPosition: number
  {field} xp: number
}

' Subcoleção challenge_progress
class challenge_progress as "challenge_progress (Subcoleção)" {
  **challengeId: string (PK)**
  --
  {field} nameChallenge: string
  {field} capFinish: int
  {field} xpObtido: int 
}

' Coleção ranking (Top-Level)
class ranking as "ranking (Coleção)" {
  **userId: string (PK, FK)**
  --
  {field} username: string
  {field} nick: string
  {field} imagePerfil: string
  {field} rankingPosition: number
}

' Subcoleção friends
class friends as "friends (Subcoleção)" {
  **friendId: string (PK, FK)**
  --
  {field} status: string ("pending", "accepted", "blocked")
  {field} username: string
  {field} nick: string
  {field} rankingPosition: number
  {field} xp: number
}

' Relacionamentos Lógicos (com cores nas setas)
users "1" -[#black]-> "1" ranking : ""
users "1" -[#black]-> "N" friends : ""
users "1" -[#black]-> "N" challenge_progress : ""

@enduml
